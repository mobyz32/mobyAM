<!DOCTYPE html>
<html>
<head>
  <title>AM Constants Calculator</title>
</head>
<body>
  <h1>AM Constants Calculator</h1>

  <div>
    <h3>Set Constants</h3>
    <input id="const1" type="number" placeholder="Const 1">
    <input id="const2" type="number" placeholder="Const 2">
    <input id="const3" type="number" placeholder="Const 3">
    <input id="const4" type="number" placeholder="Const 4">
    <input id="const5" type="number" placeholder="Const 5">
    <button onclick="saveConstants()">Save Constants</button>
  </div>

  <div>
    <h3>Enter Machine Values</h3>
    <input id="val1" type="number" placeholder="Value 1">
    <input id="val2" type="number" placeholder="Value 2">
    <input id="val3" type="number" placeholder="Value 3">
    <input id="val4" type="number" placeholder="Value 4">
    <input id="val5" type="number" placeholder="Value 5">
    <button onclick="calculate()">Calculate</button>
  </div>

  <div>
    <h3>Results</h3>
    <pre id="results"></pre>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAXwW14wEzGz5IjetGeWCb0tmU_lkDJqJI",
      authDomain: "mobyam32.firebaseapp.com",
      projectId: "mobyam32",
      storageBucket: "mobyam32.appspot.com",
      messagingSenderId: "453231570263",
      appId: "1:453231570263:web:1e219d402146960c502212"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const docRef = doc(db, "constants", "myValues");

    async function saveConstants() {
      const c1 = parseFloat(document.getElementById('const1').value);
      const c2 = parseFloat(document.getElementById('const2').value);
      const c3 = parseFloat(document.getElementById('const3').value);
      const c4 = parseFloat(document.getElementById('const4').value);
      const c5 = parseFloat(document.getElementById('const5').value);

      await setDoc(docRef, { c1, c2, c3, c4, c5 });
      alert("Constants saved to cloud!");
    }

    async function loadConstants() {
      const snap = await getDoc(docRef);
      if (snap.exists()) {
        const data = snap.data();
        document.getElementById('const1').value = data.c1 ?? '';
        document.getElementById('const2').value = data.c2 ?? '';
        document.getElementById('const3').value = data.c3 ?? '';
        document.getElementById('const4').value = data.c4 ?? '';
        document.getElementById('const5').value = data.c5 ?? '';
      }
    }

    function calculate() {
      const c1 = parseFloat(document.getElementById('const1').value);
      const c2 = parseFloat(document.getElementById('const2').value);
      const c3 = parseFloat(document.getElementById('const3').value);
      const c4 = parseFloat(document.getElementById('const4').value);
      const c5 = parseFloat(document.getElementById('const5').value);

      const v1 = parseFloat(document.getElementById('val1').value) - c1;
      const v2 = parseFloat(document.getElementById('val2').value) - c2;
      const v3 = parseFloat(document.getElementById('val3').value) - c3;
      const v4 = parseFloat(document.getElementById('val4').value) - c4;
      const v5 = parseFloat(document.getElementById('val5').value) - c5;

      document.getElementById('results').textContent =
        `Results:\n${v1}\n${v2}\n${v3}\n${v4}\n${v5}`;
    }

    loadConstants();
  </script>
</body>
</html>
